{
    "env": {
        "clientId": "02dfaa30-850e-45de-92fb-b22019730578"
    },
    "tests": [
        {
            "name": "create-user",
            "positive": true,
            "request": {
                "method": "POST",
                "path": "/v1/users",
                "body": {
                    "email": "my@email.com",
                    "password": "my-secret-password"
                },
                "withToken": false
            },
            "response": {
                "status": 200
            },
            "setEnv": [
                {
                    "envKey": "userId",
                    "responseKey": "id"
                }
            ]
        },
        {
            "name": "create-duplicate-user",
            "positive": false,
            "request": {
                "method": "POST",
                "path": "/v1/users",
                "body": {
                    "email": "my@email.com",
                    "password": "some-other-password"
                },
                "withToken": false
            },
            "response": {
                "status": 409
            }
        },
        {
            "name": "login-created-user-w-wrong-credentials",
            "positive": false,
            "request": {
                "method": "POST",
                "path": "/v1/login",
                "body": {
                    "email": "my@email.com",
                    "password": "my-wrong-password"
                },
                "withToken": false
            },
            "response": {
                "status": 401
            }
        },
        {
            "name": "login-created-user",
            "positive": true,
            "request": {
                "method": "POST",
                "path": "/v1/login",
                "body": {
                    "email": "my@email.com",
                    "password": "my-secret-password"
                },
                "withToken": false
            },
            "response": {
                "status": 200
            },
            "setEnv": [
                {
                    "envKey": "authToken",
                    "responseKey": "token"
                }
            ]
        },
        {
            "name": "get-created-user",
            "positive": true,
            "request": {
                "method": "GET",
                "path": "/v1/users/${userId}",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "get-other-user",
            "positive": false,
            "request": {
                "method": "GET",
                "path": "/v1/users/3d9b4cff-d0f7-4030-b4dd-15e270fa1c39",
                "withToken": true
            },
            "response": {
                "status": 403
            }
        },
        {
            "name": "delete-other-user",
            "positive": false,
            "request": {
                "method": "DELETE",
                "path": "/v1/users/3d9b4cff-d0f7-4030-b4dd-15e270fa1c39",
                "withToken": true
            },
            "response": {
                "status": 403
            }
        },
        {
            "name": "change-user-password",
            "positive": true,
            "request": {
                "method": "PUT",
                "path": "/v1/users/${userId}/password",
                "body": {
                    "new": "my-new-password",
                    "repeated": "my-new-password",
                    "old": {
                        "email": "my@email.com",
                        "password": "my-secret-password"
                    }
                },
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "change-user-email",
            "positive": true,
            "request": {
                "method": "PUT",
                "path": "/v1/users/${userId}/email",
                "body": {
                    "id": "${userId}",
                    "email": "my-new@email.com"
                },
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "login-user-w-new-credentials",
            "positive": true,
            "request": {
                "method": "POST",
                "path": "/v1/login",
                "body": {
                    "email": "my-new@email.com",
                    "password": "my-new-password"
                },
                "withToken": false
            },
            "response": {
                "status": 200
            },
            "setEnv": [
                {
                    "envKey": "authToken",
                    "responseKey": "token"
                }
            ]
        },
        {
            "name": "login-user-w-old-credentials",
            "positive": false,
            "request": {
                "method": "POST",
                "path": "/v1/login",
                "body": {
                    "email": "my@email.com",
                    "password": "my-secret-password"
                },
                "withToken": false
            },
            "response": {
                "status": 401
            }
        },
        {
            "name": "create-watchlist",
            "positive": true,
            "request": {
                "method": "POST",
                "path": "/v1/watchlists/portfolio",
                "withToken": true
            },
            "response": {
                "status": 200
            },
            "setEnv": [
                {
                    "envKey": "watchlistId",
                    "responseKey": "id"
                }
            ]
        },
        {
            "name": "get-created-watchlist",
            "positive": true,
            "request": {
                "method": "GET",
                "path": "/v1/watchlists/${watchlistId}",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "delete-created-watchlist",
            "positive": true,
            "request": {
                "method": "DELETE",
                "path": "/v1/watchlists/${watchlistId}",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "create-new-watchlist",
            "positive": true,
            "request": {
                "method": "POST",
                "path": "/v1/watchlists/watchlist",
                "withToken": true
            },
            "response": {
                "status": 200
            },
            "setEnv": [
                {
                    "envKey": "watchlistId",
                    "responseKey": "id"
                }
            ]
        },
        {
            "name": "create-duplicate-watchlist",
            "positive": false,
            "request": {
                "method": "POST",
                "path": "/v1/watchlists/watchlist",
                "withToken": true
            },
            "response": {
                "status": 409
            }
        },
        {
            "name": "get-new-watchlist",
            "positive": true,
            "request": {
                "method": "GET",
                "path": "/v1/watchlists/${watchlistId}",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "change-watchlist-name",
            "positive": true,
            "request": {
                "method": "PUT",
                "path": "/v1/watchlists/${watchlistId}/name/portfolio",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "add-AAPL-to-watchlist",
            "positive": true,
            "request": {
                "method": "PUT",
                "path": "/v1/watchlists/${watchlistId}/stock/AAPL",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "add-WRONG-to-watchlist",
            "positive": false,
            "request": {
                "method": "PUT",
                "path": "/v1/watchlists/${watchlistId}/stock/WRONG",
                "withToken": true
            },
            "response": {
                "status": 404
            }
        },
        {
            "name": "add-GOOG-to-watchlist",
            "positive": true,
            "request": {
                "method": "PUT",
                "path": "/v1/watchlists/${watchlistId}/stock/GOOG",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "add-AMZN-to-watchlist",
            "positive": true,
            "request": {
                "method": "PUT",
                "path": "/v1/watchlists/${watchlistId}/stock/AMZN",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "delete-GOOG-from-watchlist",
            "positive": true,
            "request": {
                "method": "DELETE",
                "path": "/v1/watchlists/${watchlistId}/stock/GOOG",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "delete-watchlist-with-members",
            "positive": true,
            "request": {
                "method": "DELETE",
                "path": "/v1/watchlists/${watchlistId}",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "delete-missing-watchlist",
            "positive": false,
            "request": {
                "method": "DELETE",
                "path": "/v1/watchlists/${watchlistId}",
                "withToken": true
            },
            "response": {
                "status": 404
            }
        },
        {
            "name": "delete-created-user",
            "positive": true,
            "request": {
                "method": "DELETE",
                "path": "/v1/users/${userId}",
                "withToken": true
            },
            "response": {
                "status": 200
            }
        },
        {
            "name": "login-to-deleted-user",
            "positive": false,
            "request": {
                "method": "POST",
                "path": "/v1/login",
                "body": {
                    "email": "my-new@email.com",
                    "password": "my-new-password"
                },
                "withToken": false
            },
            "response": {
                "status": 401
            }
        }
    ]
}